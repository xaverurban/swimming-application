<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Main.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">swimming-application</a> &gt; <a href="index.source.html" class="el_package">default</a> &gt; <span class="el_source">Main.kt</span></div><h1>Main.kt</h1><pre class="source lang-java linenums">import controllers.SwimmerAPI
import models.Race
import models.Swimmer
import persistence.XMLSerializer
import utils.ScannerInput
import utils.ScannerInput.readNextInt
import utils.ScannerInput.readNextLine
import java.io.File
import kotlin.system.exitProcess

/**
 * This class provides an interactive menu-driven application for managing a list of swimmers and their associated races.
 * It offers functionality to add, search, list, update, and delete swimmers, as well as manage their races.
 * The SwimmerApp interacts with the SwimmerAPI and uses a Serializer object to support storing and loading swimmer data.
 * It allows users to perform various operations on swimmers such as adding, listing, updating, deleting, and archiving swimmers.
 * Additionally, this class provides functionality to add, update, and delete races associated with swimmers.
 * Users can also search for swimmers by name and races by their description.
 *
 * @author Xaver Urban
 * @since v1.0
 */

<span class="nc" id="L23">private val swimmerAPI = SwimmerAPI(XMLSerializer(File(&quot;swimmers.xml&quot;)))</span>
fun main() {
<span class="nc" id="L25">    runMenu()</span>
<span class="nc" id="L26">}</span>

/**
 * Displays the main menu of the Swimming App and returns the user's selected option as an integer.
 * The menu provides options for managing swimmers and races, including adding, listing, updating, deleting,
 * and archiving swimmers, as well as adding, updating, and deleting races associated with swimmers.
 * Additionally, the menu offers options to search for swimmers by name, search for races by description, and list graded races.
 *
 * @return An integer representing the user's selected menu option.
 */
fun mainMenu(): Int {
<span class="nc" id="L37">    val title = &quot;\u001B[1m&quot;</span>
<span class="nc" id="L38">    val sectionTitle = &quot;\u001B[33m&quot;</span>
<span class="nc" id="L39">    val optionNumber = &quot;\u001B[32m&quot;</span>
<span class="nc" id="L40">    val optionName = &quot;\u001B[36m&quot;</span>
<span class="nc" id="L41">    val reset = &quot;\u001B[0m&quot;</span>

<span class="nc" id="L43">    return readNextInt(</span>
<span class="nc" id="L44">        &quot;&quot;&quot;</span>
<span class="nc" id="L45">        $title+-----------------------------------------------------+</span>
<span class="nc" id="L46">        |                  ${title}SWIMMING APP$reset                     </span>
        +-----------------------------------------------------+
<span class="nc" id="L48">        | ${sectionTitle}swimmer MENU$reset                                         </span>
<span class="nc" id="L49">        |   ${optionNumber}1) ${optionName}Add a Swimmer$reset                                </span>
<span class="nc" id="L50">        |   ${optionNumber}2) ${optionName}List Swimmers$reset                                </span>
<span class="nc" id="L51">        |   ${optionNumber}3) ${optionName}Update a Swimmer$reset                             </span>
<span class="nc" id="L52">        |   ${optionNumber}4) ${optionName}Delete a Swimmer$reset                             </span>
<span class="nc" id="L53">        |   ${optionNumber}5) ${optionName}Archive a Swimmer$reset                            </span>
        +-----------------------------------------------------+
<span class="nc" id="L55">        | ${sectionTitle}SWIMMER MENU$reset                                      </span>
<span class="nc" id="L56">        |   ${optionNumber}6) ${optionName}Add race to a Swimmer$reset                       </span>
<span class="nc" id="L57">        |   ${optionNumber}7) ${optionName}Update race contents on a Swimmer$reset           </span>
<span class="nc" id="L58">        |   ${optionNumber}8) ${optionName}Delete race from a Swimmer$reset                  </span>
<span class="nc" id="L59">        |   ${optionNumber}9) ${optionName}Mark race status (graded, ungraded)$reset                                </span>
        +-----------------------------------------------------+
<span class="nc" id="L61">        | ${sectionTitle}REPORT MENU FOR SWIMMERS$reset                          </span>
<span class="nc" id="L62">        |   ${optionNumber}10) ${optionName}Search for all Swimmers (by name)$reset           </span>
        +-----------------------------------------------------+
<span class="nc" id="L64">        | ${sectionTitle}REPORT MENU FOR RACES$reset                             </span>
<span class="nc" id="L65">        |    ${optionNumber}11) ${optionName}Add a swim time for a race$reset                 </span>
<span class="nc" id="L66">        |    ${optionNumber}12) ${optionName}View all swim times$reset                        </span>
<span class="nc" id="L67">        |    ${optionNumber}13) ${optionName}Add a race to the database$reset                 </span>
<span class="nc" id="L68">        |    ${optionNumber}14) ${optionName}View all races$reset                             </span>
<span class="nc" id="L69">        |    ${optionNumber}15) ${optionName}Search for all races (by race name)$reset        </span>
<span class="nc" id="L70">        |    ${optionNumber}16) ${optionName}List ungraded races$reset                        </span>
<span class="nc" id="L71">        |    ${optionNumber}17) ${optionName}List graded races$reset                          </span>
        +-----------------------------------------------------+
<span class="nc" id="L73">        | ${sectionTitle}ARCHIVE MENU$reset                                     </span>
<span class="nc" id="L74">        |    ${optionNumber}18) ${optionName}List all archived swimmers$reset                 </span>
<span class="nc" id="L75">        |    ${optionNumber}19) ${optionName}Reinstate a swimmer from archive$reset           </span>
<span class="nc" id="L76">        |    ${optionNumber}20) ${optionName}Delete a swimmer from archive$reset              </span>
        +-----------------------------------------------------+
<span class="nc" id="L78">        | ${sectionTitle}DATA MENU$reset                                         </span>
<span class="nc" id="L79">        |    ${optionNumber}100) ${optionName}Save data to file$reset                           </span>
<span class="nc" id="L80">        |    ${optionNumber}101) ${optionName}Load data from file$reset                         </span>
        +-----------------------------------------------------+
<span class="nc" id="L82">        |    ${optionNumber}0) ${optionName}Exit$reset                                         </span>
        +-----------------------------------------------------+
        ==&gt;&gt; 
<span class="nc" id="L85">        &quot;&quot;&quot;.trimIndent()</span>
    )
}

/**
 * Executes the main loop of the Swimming App, displaying the main menu and executing the appropriate functions
 * based on the user's input. This loop continues until the user selects the exit option.
 */
fun runMenu() {
    do {
<span class="nc bnc" id="L95" title="All 16 branches missed.">        when (val option = mainMenu()) {</span>
<span class="nc" id="L96">            1 -&gt; addSwimmer()</span>
<span class="nc" id="L97">            2 -&gt; listSwimmers()</span>
<span class="nc" id="L98">            3 -&gt; updateSwimmer()</span>
<span class="nc" id="L99">            4 -&gt; deleteSwimmer()</span>
<span class="nc" id="L100">            5 -&gt; archiveSwimmer()</span>
<span class="nc" id="L101">            6 -&gt; addRaceToSwimmer()</span>
<span class="nc" id="L102">            7 -&gt; updateRaceGradedInSwimmer()</span>
<span class="nc" id="L103">            8 -&gt; deleteRace()</span>
<span class="nc" id="L104">            9 -&gt; markRaceStatus()</span>
<span class="nc" id="L105">            10 -&gt; searchSwimmers()</span>
<span class="nc" id="L106">            15 -&gt; searchRaces()</span>
<span class="nc" id="L107">            16 -&gt; listUngradedRaces()</span>
            //  17 -&gt; listSwimmersSortedByRaceCount()
<span class="nc" id="L109">            100 -&gt; save()</span>
<span class="nc" id="L110">            101 -&gt; load()</span>
<span class="nc" id="L111">            0 -&gt; exitApp()</span>
<span class="nc" id="L112">            else -&gt; println(&quot;Invalid option entered: $option&quot;)</span>
        }
<span class="nc" id="L114">    } while (true)</span>
}

/**
 * Prompts the user for swimmer details (name, level, and category), creates a new Swimmer object with the provided
 * information, and attempts to add the Swimmer to the swimmerAPI. Displays a success or failure message based on
 * whether the Swimmer was added successfully.
 */
fun addSwimmer() {
<span class="nc" id="L123">    val swimmerName = ScannerInput.readNextLine(&quot;Enter a name for the swimmer: &quot;)</span>
<span class="nc" id="L124">    val swimmerLevel = readNextInt(&quot;Enter a level of swimmer (1-low, 2, 3, 4, 5-high): &quot;)</span>
<span class="nc" id="L125">    val swimmerCategory = ScannerInput.readNextLine(&quot;Enter a category for the swimmer: &quot;)</span>
<span class="nc" id="L126">    val isAdded = swimmerAPI.add(</span>
<span class="nc" id="L127">        Swimmer(</span>
<span class="nc" id="L128">            swimmerName = swimmerName,</span>
<span class="nc" id="L129">            swimmerLevel = swimmerLevel,</span>
<span class="nc" id="L130">            swimmerCategory = swimmerCategory</span>
        )
    )

<span class="nc bnc" id="L134" title="All 2 branches missed.">    if (isAdded) {</span>
<span class="nc" id="L135">        println(&quot;Added Successfully&quot;)</span>
    } else {
<span class="nc" id="L137">        println(&quot;Add Failed&quot;)</span>
    }
<span class="nc" id="L139">}</span>

/**
 *Asks the user to enter the name of the swimmer they want to search by.
 *Searches for all swimmers whose name contains the entered search term.
 *If found, it prints out a list of all the matching swimmers.
 *If no matches are found, it prints a message indicating that no swimmers were found.
 */
fun searchSwimmers() {
<span class="nc" id="L148">    val searchName = readNextLine(&quot;Enter the name to search by: &quot;)</span>
<span class="nc" id="L149">    val searchResults = swimmerAPI.searchSwimmersByName(searchName)</span>
<span class="nc bnc" id="L150" title="All 4 branches missed.">    if (searchResults.isEmpty()) {</span>
<span class="nc" id="L151">        println(&quot;No swimmers found&quot;)</span>
    } else {
<span class="nc" id="L153">        println(searchResults)</span>
    }
<span class="nc" id="L155">}</span>

fun searchRaces() {
<span class="nc" id="L158">    val searchContents = readNextLine(&quot;Enter the race contents to search by: &quot;)</span>
<span class="nc" id="L159">    val searchResults = swimmerAPI.searchRaceByContents(searchContents)</span>
<span class="nc bnc" id="L160" title="All 4 branches missed.">    if (searchResults.isEmpty()) {</span>
<span class="nc" id="L161">        println(&quot;No races found, try again!&quot;)</span>
    } else {
<span class="nc" id="L163">        println(searchResults)</span>
    }
<span class="nc" id="L165">}</span>

/**
 * Lists all swimmers and prompts the user to enter the ID of the swimmer to delete.
 * If a valid ID is entered, attempts to delete the swimmer from the swimmerAPI and displays a success or failure message.
 */
fun deleteSwimmer() {
<span class="nc" id="L172">    listSwimmers()</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">    if (swimmerAPI.numberOfSwimmers() &gt; 0) {</span>
        // only ask the user to choose the swimmer to delete if swimmers exist
<span class="nc" id="L175">        val id = readNextInt(&quot;Enter the id of the swimmer to delete: &quot;)</span>
        // pass the index of the swimmer to SwimmerAPI for deleting and check for success.
<span class="nc" id="L177">        val swimmerToDelete = swimmerAPI.delete(id)</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">        if (swimmerToDelete) {</span>
<span class="nc" id="L179">            println(&quot;Delete Successful!&quot;)</span>
        } else {
<span class="nc" id="L181">            println(&quot;Delete NOT Successful&quot;)</span>
        }
    }
<span class="nc" id="L184">}</span>

/**
 * Prompts the user to select an active swimmer and, if a valid swimmer is chosen, adds a race to the swimmer.
 * Displays a success or failure message based on whether the race was added successfully.
 */
private fun addRaceToSwimmer() {
<span class="nc" id="L191">    val swimmer: Swimmer? = askUserToChooseActiveSwimmer()</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">    if (swimmer != null) {</span>
<span class="nc" id="L193">        print(&quot;\nEnter race details:\n&quot;)</span>
<span class="nc" id="L194">        val raceGraded = ScannerInput.readNextLine(&quot;\tRace Grade(eg. Pass, Fail): &quot;)</span>
<span class="nc" id="L195">        val raceTime = ScannerInput.readNextLine(&quot;\tRace Time(use format HH:mm:ss): &quot;)</span>
<span class="nc" id="L196">        val raceType = ScannerInput.readNextLine(&quot;\tRace Type(eg. Backstroke, Freestyle): &quot;)</span>
<span class="nc bnc" id="L197" title="All 2 branches missed.">        if (swimmer.addRace(Race(raceGraded = raceGraded, raceTime = raceTime, raceType = raceType))) {</span>
<span class="nc" id="L198">            println(&quot;Race added successfully!&quot;)</span>
        } else {
<span class="nc" id="L200">            println(&quot;Failed to add race. Try again!&quot;)</span>
        }
    }
<span class="nc" id="L203">}</span>

/**
 * Displays a menu to list swimmers based on different criteria (all, active, or archived).
 * Executes the appropriate function based on the user's input, or displays an error message if no swimmers are stored.
 */
fun listSwimmers() {
<span class="nc bnc" id="L210" title="All 2 branches missed.">    if (swimmerAPI.numberOfSwimmers() &gt; 0) {</span>
<span class="nc" id="L211">        val green = &quot;\u001B[32m&quot;</span>
<span class="nc" id="L212">        val yellow = &quot;\u001B[33m&quot;</span>
<span class="nc" id="L213">        val reset = &quot;\u001B[0m&quot;</span>

<span class="nc" id="L215">        val option = readNextInt(</span>
<span class="nc" id="L216">            &quot;&quot;&quot;</span>
<span class="nc" id="L217">            $yellowâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”�</span>
<span class="nc" id="L218">            â”‚         ${green}VIEW SWIMMERS MENU$yellow          â”‚</span>
            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
<span class="nc" id="L220">            â”‚   1) ${green}View All Swimmers$reset              â”‚</span>
<span class="nc" id="L221">            â”‚   2) ${green}View Active Swimmers$reset           â”‚</span>
<span class="nc" id="L222">            â”‚   3) ${green}View Archived Swimmers$reset         â”‚</span>
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            ==&gt;&gt; 
<span class="nc" id="L225">            &quot;&quot;&quot;.trimIndent()</span>
        )

<span class="nc bnc" id="L228" title="All 4 branches missed.">        when (option) {</span>
<span class="nc" id="L229">            1 -&gt; listAllSwimmers()</span>
<span class="nc" id="L230">            2 -&gt; listActiveSwimmers()</span>
<span class="nc" id="L231">            3 -&gt; listArchivedSwimmers()</span>
<span class="nc" id="L232">            else -&gt; println(&quot;Invalid option entered: $option&quot;)</span>
        }
    } else {
<span class="nc" id="L235">        println(&quot;Option Invalid - No swimmers stored&quot;)</span>
    }
<span class="nc" id="L237">}</span>

/**
 * Lists all swimmers in the swimmerAPI.
 */
<span class="nc" id="L242">fun listAllSwimmers() = println(swimmerAPI.listAllSwimmers())</span>

/**
 * Lists all active swimmers in the swimmerAPI.
 */
<span class="nc" id="L247">fun listActiveSwimmers() = println(swimmerAPI.listActiveSwimmers())</span>

/**
 * Lists all archived swimmers in the swimmerAPI.
 */
<span class="nc" id="L252">fun listArchivedSwimmers() = println(swimmerAPI.listArchivedSwimmers())</span>

/**
 * Lists all swimmers and prompts the user to update the swimmer details (name, level, and category) for the selected swimmer.
 * Updates the swimmer in the swimmerAPI if the entered ID is valid, and displays a success or failure message.
 */
fun updateSwimmer() {
<span class="nc" id="L259">    listSwimmers()</span>
<span class="nc bnc" id="L260" title="All 2 branches missed.">    if (swimmerAPI.numberOfSwimmers() &gt; 0) {</span>

<span class="nc" id="L262">        val id = readNextInt(&quot;Enter the id of the swimmer to update: &quot;)</span>
<span class="nc bnc" id="L263" title="All 2 branches missed.">        if (swimmerAPI.findSwimmer(id) != null) {</span>
<span class="nc" id="L264">            val swimmerName = ScannerInput.readNextLine(&quot;Enter a name for the swimmer: &quot;)</span>
<span class="nc" id="L265">            val swimmerLevel = readNextInt(&quot;Enter a level of swimmer (1-low, 2, 3, 4, 5-high): &quot;)</span>
<span class="nc" id="L266">            val swimmerCategory = ScannerInput.readNextLine(&quot;Enter a main category for the swimmer: &quot;)</span>

<span class="nc bnc" id="L268" title="All 2 branches missed.">            if (swimmerAPI.update(id, Swimmer(0, swimmerName, swimmerLevel, swimmerCategory, false))) {</span>
<span class="nc" id="L269">                println(&quot;Update Successful&quot;)</span>
            } else {
<span class="nc" id="L271">                println(&quot;Update Failed&quot;)</span>
            }
        } else {
<span class="nc" id="L274">            println(&quot;There are no swimmers for this index number&quot;)</span>
        }
    }
<span class="nc" id="L277">}</span>

/**
 *
 *Lists all the ungraded races in the swimmer app database.
 *If there are ungraded races, prints the total number of ungraded races
 *followed by the list of ungraded races.
 */
fun listUngradedRaces() {
<span class="nc bnc" id="L286" title="All 2 branches missed.">    if (swimmerAPI.numberOfUngradedRaces() &gt; 0) {</span>
<span class="nc" id="L287">        println(&quot;Total Ungraded Races: ${swimmerAPI.numberOfUngradedRaces()}&quot;)</span>
    }
<span class="nc" id="L289">    println(swimmerAPI.listUngradedRaces())</span>
<span class="nc" id="L290">}</span>

/**
 * Lists all active swimmers and prompts the user to enter the ID of the swimmer to archive.
 * If a valid ID is entered, attempts to archive the swimmer in the swimmerAPI and displays a success or failure message.
 */
fun archiveSwimmer() {
<span class="nc" id="L297">    listActiveSwimmers()</span>
<span class="nc bnc" id="L298" title="All 2 branches missed.">    if (swimmerAPI.numberOfActiveSwimmers() &gt; 0) {</span>
        // only ask the user to choose the swimmer to archive if active swimmers exist
<span class="nc" id="L300">        val id = readNextInt(&quot;Enter the ID of the swimmer you want to archive: &quot;)</span>
<span class="nc" id="L301">        val archivedSwimmer = swimmerAPI.archiveSwimmer(id)</span>
<span class="nc bnc" id="L302" title="All 2 branches missed.">        if (archivedSwimmer) {</span>
<span class="nc" id="L303">            println(&quot;Swimmer with ID $id has been successfully archived!&quot;)</span>
        } else {
<span class="nc" id="L305">            println(&quot;Failed to archive swimmer with ID $id. Please try again.&quot;)</span>
        }
    } else {
<span class="nc" id="L308">        println(&quot;There are no active swimmers to archive.&quot;)</span>
    }
<span class="nc" id="L310">}</span>

/**
 * Deletes a race from a swimmer's list of races.
 * Prompts the user to select an active swimmer, then a race from that swimmer's list.
 * If the race is found and successfully deleted, a success message is printed.
 */
fun deleteRace() {
<span class="nc" id="L318">    val swimmer: Swimmer? = askUserToChooseActiveSwimmer()</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">    if (swimmer != null) {</span>
<span class="nc" id="L320">        val race: Race? = askUserToChooseRace(swimmer)</span>
<span class="nc bnc" id="L321" title="All 2 branches missed.">        if (race != null) {</span>
<span class="nc" id="L322">            val isDeleted = swimmer.delete(race.raceId)</span>
<span class="nc bnc" id="L323" title="All 2 branches missed.">            if (isDeleted)</span>
<span class="nc" id="L324">                println(&quot;Race deleted successfully from ${swimmer.swimmerName}'s list of races.&quot;)</span>
<span class="nc" id="L325">            else println(&quot;Unable to delete the race from ${swimmer.swimmerName}'s list of races.&quot;)</span>
<span class="nc" id="L326">        } else println(&quot;Invalid race ID. Please choose a valid race ID.&quot;)</span>
    }
<span class="nc" id="L328">}</span>

/**
 * Updates the graded contents of a race in a swimmer's list.
 * Prompts the user to select an active swimmer, then a race from that swimmer's list.
 * Asks the user for new graded contents and updates the race if found.
 */
fun updateRaceGradedInSwimmer() {
<span class="nc" id="L336">    val swimmer: Swimmer? = askUserToChooseActiveSwimmer()</span>

<span class="nc bnc" id="L338" title="All 2 branches missed.">    if (swimmer != null) {</span>
<span class="nc" id="L339">        val item: Race? = askUserToChooseRace(swimmer)</span>

<span class="nc bnc" id="L341" title="All 2 branches missed.">        if (item != null) {</span>
<span class="nc" id="L342">            val newGrade = ScannerInput.readNextLine(&quot;Enter new grade(eg.Pass, Fail): &quot;)</span>
<span class="nc" id="L343">            val newTime = ScannerInput.readNextLine(&quot;Enter new time(use format HH:mm:ss): &quot;)</span>
<span class="nc" id="L344">            val newType = ScannerInput.readNextLine(&quot;Enter new type(eg. Backstroke, Freestyle etc.): &quot;)</span>

<span class="nc" id="L346">            val updatedRace = Race(</span>
<span class="nc" id="L347">                raceId = item.raceId,</span>
<span class="nc" id="L348">                raceGraded = newGrade,</span>
<span class="nc" id="L349">                raceTime = newTime,</span>
<span class="nc" id="L350">                raceType = newType,</span>
<span class="nc" id="L351">                isRaceOutdated = item.isRaceOutdated</span>
            )
<span class="nc bnc" id="L353" title="All 2 branches missed.">            if (swimmer.update(item.raceId, updatedRace)) {</span>
<span class="nc" id="L354">                println(&quot;Race contents updated&quot;)</span>
            } else {
<span class="nc" id="L356">                println(&quot;Race contents NOT updated&quot;)</span>
            }
        } else {
<span class="nc" id="L359">            println(&quot;Invalid Race Id&quot;)</span>
        }
    }
<span class="nc" id="L362">}</span>

/**
 *
 *Prompts the user to choose an active swimmer from the list of active swimmers and returns the corresponding Swimmer object.
 *Verifies if the selected swimmer is active before returning the object. If the swimmer is not active, it returns null.
 *@return Swimmer? - the selected swimmer object if active, null otherwise
 */
fun markRaceStatus() {
<span class="nc" id="L371">    val swimmer: Swimmer? = askUserToChooseActiveSwimmer()</span>
<span class="nc bnc" id="L372" title="All 2 branches missed.">    if (swimmer != null) {</span>
<span class="nc" id="L373">        val race: Race? = askUserToChooseRace(swimmer)</span>
<span class="nc bnc" id="L374" title="All 2 branches missed.">        if (race != null) {</span>
            var changeStatus: Char
<span class="nc bnc" id="L376" title="All 2 branches missed.">            if (race.isRaceOutdated) {</span>
<span class="nc" id="L377">                changeStatus =</span>
<span class="nc" id="L378">                    ScannerInput.readNextChar(&quot;The race is currently complete...do you want to mark it as Ungraded?&quot;)</span>
<span class="nc bnc" id="L379" title="All 4 branches missed.">                if ((changeStatus == 'Y') || (changeStatus == 'y'))</span>
<span class="nc" id="L380">                    race.isRaceOutdated = false</span>
            } else {
<span class="nc" id="L382">                changeStatus =</span>
<span class="nc" id="L383">                    ScannerInput.readNextChar(&quot;The race is currently TODO...do you want to mark it as Graded?&quot;)</span>
<span class="nc bnc" id="L384" title="All 4 branches missed.">                if ((changeStatus == 'Y') || (changeStatus == 'y'))</span>
<span class="nc" id="L385">                    race.isRaceOutdated = true</span>
            }
        }
    }
<span class="nc" id="L389">}</span>

/**
 * Asks the user to choose an active swimmer from the list of active swimmers.
 * Prompts the user to enter the ID of the swimmer they want to select.
 * Verifies if the swimmer is active and returns the swimmer object if found and active.
 *
 * @return Swimmer? - the selected swimmer object if active, null otherwise
 */
private fun askUserToChooseActiveSwimmer(): Swimmer? {
<span class="nc" id="L399">    listActiveSwimmers()</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">    if (swimmerAPI.numberOfActiveSwimmers() &gt; 0) {</span>
<span class="nc" id="L401">        val swimmer = swimmerAPI.findSwimmer(readNextInt(&quot;\nEnter the id of the swimmer: &quot;))</span>
<span class="nc bnc" id="L402" title="All 2 branches missed.">        if (swimmer != null) {</span>
<span class="nc bnc" id="L403" title="All 2 branches missed.">            if (swimmer.isSwimmerArchived) {</span>
<span class="nc" id="L404">                println(&quot;Swimmer is NOT Active, it is Archived&quot;)</span>
            } else {
<span class="nc" id="L406">                return swimmer</span>
            }
        } else {
<span class="nc" id="L409">            println(&quot;Swimmer id is not valid&quot;)</span>
        }
    }
<span class="nc" id="L412">    return null</span>
}

/**
 * Asks the user to choose a race from a swimmer's list of races.
 * Prints the list of races for the chosen swimmer and prompts the user to enter the ID of the race.
 * Returns the selected race object if found, null otherwise.
 *
 * @param swimmer - the swimmer object whose races the user will choose from
 * @return Race? - the selected race object if found, null otherwise
 */
private fun askUserToChooseRace(swimmer: Swimmer): Race? {
<span class="nc bnc" id="L424" title="All 2 branches missed.">    if (swimmer.numberOfRaces() &gt; 0) {</span>
<span class="nc" id="L425">        print(swimmer.listRaces())</span>
<span class="nc" id="L426">        return swimmer.findOne(readNextInt(&quot;\nEnter the id of the item: &quot;))</span>
    } else {
<span class="nc" id="L428">        println(&quot;No items for chosen swimmer&quot;)</span>
<span class="nc" id="L429">        return null</span>
    }
}

/**
 * Exits the application and prints a farewell message.
 */
fun exitApp() {
<span class="nc" id="L437">    println(&quot;Exiting Application&quot;)</span>
<span class="nc" id="L438">    exitProcess(0)</span>
}

/**
 * Saves the current state of the swimmerAPI data to a file.
 * Handles exceptions that might occur during the save operation.
 */
fun save() {
<span class="nc" id="L446">    try {</span>
<span class="nc" id="L447">        swimmerAPI.store()</span>
<span class="nc" id="L448">    } catch (e: Exception) {</span>
<span class="nc" id="L449">        System.err.println(&quot;Error writing to file: $e&quot;)</span>
    }
<span class="nc" id="L451">}</span>

/**
 * Loads the swimmerAPI data from a file.
 * Handles exceptions that might occur during the load operation.
 */
fun load() {
<span class="nc" id="L458">    try {</span>
<span class="nc" id="L459">        swimmerAPI.load()</span>
<span class="nc" id="L460">    } catch (e: Exception) {</span>
<span class="nc" id="L461">        System.err.println(&quot;Error reading from file: $e&quot;)</span>
    }
<span class="nc" id="L463">}</span>
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>